import{s as n}from"./44f92166.js";function e(n){return(4294967296+n).toString(16).substring(1)}var t={normalizeInput:function(n){var e;if(n instanceof Uint8Array)e=n;else if(n instanceof Buffer)e=new Uint8Array(n);else{if("string"!=typeof n)throw new Error("Input must be an string, Buffer or Uint8Array");e=new Uint8Array(Buffer.from(n,"utf8"))}return e},toHex:function(n){return Array.prototype.map.call(n,(function(n){return(n<16?"0":"")+n.toString(16)})).join("")},debugPrint:function(n,t,r){for(var a="\n"+n+" = ",i=0;i<t.length;i+=2){if(32===r)a+=e(t[i]).toUpperCase(),a+=" ",a+=e(t[i+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);a+=e(t[i+1]).toUpperCase(),a+=e(t[i]).toUpperCase()}i%6==4?a+="\n"+new Array(n.length+4).join(" "):i<t.length-2&&(a+=" ")}console.log(a)},testSpeed:function(n,e,t){for(var r=(new Date).getTime(),a=new Uint8Array(e),i=0;i<e;i++)a[i]=i%256;var o=(new Date).getTime();for(console.log("Generated random input in "+(o-r)+"ms"),r=o,i=0;i<t;i++){var l=n(a),u=(new Date).getTime(),s=u-r;r=u,console.log("Hashed in "+s+"ms: "+l.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(s/1e3)*100)/100+" MB PER SECOND")}}};function r(n,e,t){var r=n[e]+n[t],a=n[e+1]+n[t+1];r>=4294967296&&a++,n[e]=r,n[e+1]=a}function a(n,e,t,r){var a=n[e]+t;t<0&&(a+=4294967296);var i=n[e+1]+r;a>=4294967296&&i++,n[e]=a,n[e+1]=i}function i(n,e){return n[e]^n[e+1]<<8^n[e+2]<<16^n[e+3]<<24}function o(n,e,t,i,o,l){var u=c[o],f=c[o+1],b=c[l],A=c[l+1];r(s,n,e),a(s,n,u,f);var h=s[i]^s[n],p=s[i+1]^s[n+1];s[i]=p,s[i+1]=h,r(s,t,i),h=s[e]^s[t],p=s[e+1]^s[t+1],s[e]=h>>>24^p<<8,s[e+1]=p>>>24^h<<8,r(s,n,e),a(s,n,b,A),h=s[i]^s[n],p=s[i+1]^s[n+1],s[i]=h>>>16^p<<16,s[i+1]=p>>>16^h<<16,r(s,t,i),h=s[e]^s[t],p=s[e+1]^s[t+1],s[e]=p>>>31^h<<1,s[e+1]=h>>>31^p<<1}var l=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),u=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(n){return 2*n}))),s=new Uint32Array(32),c=new Uint32Array(32);function f(n,e){var t=0;for(t=0;t<16;t++)s[t]=n.h[t],s[t+16]=l[t];for(s[24]=s[24]^n.t,s[25]=s[25]^n.t/4294967296,e&&(s[28]=~s[28],s[29]=~s[29]),t=0;t<32;t++)c[t]=i(n.b,4*t);for(t=0;t<12;t++)o(0,8,16,24,u[16*t+0],u[16*t+1]),o(2,10,18,26,u[16*t+2],u[16*t+3]),o(4,12,20,28,u[16*t+4],u[16*t+5]),o(6,14,22,30,u[16*t+6],u[16*t+7]),o(0,10,20,30,u[16*t+8],u[16*t+9]),o(2,12,22,24,u[16*t+10],u[16*t+11]),o(4,14,16,26,u[16*t+12],u[16*t+13]),o(6,8,18,28,u[16*t+14],u[16*t+15]);for(t=0;t<16;t++)n.h[t]=n.h[t]^s[t]^s[t+16]}function b(n,e){if(0===n||n>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var t={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:n},r=0;r<16;r++)t.h[r]=l[r];var a=e?e.length:0;return t.h[0]^=16842752^a<<8^n,e&&(A(t,e),t.c=128),t}function A(n,e){for(var t=0;t<e.length;t++)128===n.c&&(n.t+=n.c,f(n,!1),n.c=0),n.b[n.c++]=e[t]}function h(n){for(n.t+=n.c;n.c<128;)n.b[n.c++]=0;f(n,!0);for(var e=new Uint8Array(n.outlen),t=0;t<n.outlen;t++)e[t]=n.h[t>>2]>>8*(3&t);return e}function p(n,e,r){r=r||64,n=t.normalizeInput(n);var a=b(r,e);return A(a,n),h(a)}var g={blake2b:p,blake2bHex:function(n,e,r){var a=p(n,e,r);return t.toHex(a)},blake2bInit:b,blake2bUpdate:A,blake2bFinal:h};function w(n,e){return n[e]^n[e+1]<<8^n[e+2]<<16^n[e+3]<<24}function k(n,e,t,r,a,i){y[n]=y[n]+y[e]+a,y[r]=E(y[r]^y[n],16),y[t]=y[t]+y[r],y[e]=E(y[e]^y[t],12),y[n]=y[n]+y[e]+i,y[r]=E(y[r]^y[n],8),y[t]=y[t]+y[r],y[e]=E(y[e]^y[t],7)}function E(n,e){return n>>>e^n<<32-e}var d=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),U=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),y=new Uint32Array(16),T=new Uint32Array(16);function I(n,e){var t=0;for(t=0;t<8;t++)y[t]=n.h[t],y[t+8]=d[t];for(y[12]^=n.t,y[13]^=n.t/4294967296,e&&(y[14]=~y[14]),t=0;t<16;t++)T[t]=w(n.b,4*t);for(t=0;t<10;t++)k(0,4,8,12,T[U[16*t+0]],T[U[16*t+1]]),k(1,5,9,13,T[U[16*t+2]],T[U[16*t+3]]),k(2,6,10,14,T[U[16*t+4]],T[U[16*t+5]]),k(3,7,11,15,T[U[16*t+6]],T[U[16*t+7]]),k(0,5,10,15,T[U[16*t+8]],T[U[16*t+9]]),k(1,6,11,12,T[U[16*t+10]],T[U[16*t+11]]),k(2,7,8,13,T[U[16*t+12]],T[U[16*t+13]]),k(3,4,9,14,T[U[16*t+14]],T[U[16*t+15]]);for(t=0;t<8;t++)n.h[t]^=y[t]^y[t+8]}function v(n,e){if(!(n>0&&n<=32))throw new Error("Incorrect output length, should be in [1, 32]");var t=e?e.length:0;if(e&&!(t>0&&t<=32))throw new Error("Incorrect key length, should be in [1, 32]");var r={h:new Uint32Array(d),b:new Uint32Array(64),c:0,t:0,outlen:n};return r.h[0]^=16842752^t<<8^n,t>0&&(D(r,e),r.c=64),r}function D(n,e){for(var t=0;t<e.length;t++)64===n.c&&(n.t+=n.c,I(n,!1),n.c=0),n.b[n.c++]=e[t]}function H(n){for(n.t+=n.c;n.c<64;)n.b[n.c++]=0;I(n,!0);for(var e=new Uint8Array(n.outlen),t=0;t<n.outlen;t++)e[t]=n.h[t>>2]>>8*(3&t)&255;return e}function N(n,e,r){r=r||32,n=t.normalizeInput(n);var a=v(r,e);return D(a,n),H(a)}var S,C={blake2s:N,blake2sHex:function(n,e,r){var a=N(n,e,r);return t.toHex(a)},blake2sInit:v,blake2sUpdate:D,blake2sFinal:H},O={blake2b:g.blake2b,blake2bHex:g.blake2bHex,blake2bInit:g.blake2bInit,blake2bUpdate:g.blake2bUpdate,blake2bFinal:g.blake2bFinal,blake2s:C.blake2s,blake2sHex:C.blake2sHex,blake2sInit:C.blake2sInit,blake2sUpdate:C.blake2sUpdate,blake2sFinal:C.blake2sFinal};!function(n){n[n.AGENT=0]="AGENT",n[n.ENTRY=1]="ENTRY",n[n.DHTOP=2]="DHTOP",n[n.HEADER=3]="HEADER",n[n.DNA=4]="DNA"}(S||(S={}));const P={};function R(e,t){const r="string"==typeof e?e:JSON.stringify(e);if(P[r])return P[r];const a=new Uint8Array(function(n){for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0,a=n.length;r<a;r++)t[r]=n.charCodeAt(r);return e}(r)),i=O.blake2b(a,null,32),o=n(i),l=`u${function(n){switch(n){case S.AGENT:return"hCAk";case S.ENTRY:return"hCEk";case S.DHTOP:return"hCQk";case S.HEADER:return"hCkk";case S.DNA:return"hC0k"}}(t)}${o.slice(1)}`;return P[r]=l,l}var m,_,G,x,L;!function(n){n[n.Latest=0]="Latest",n[n.Contents=1]="Contents"}(m||(m={})),function(n){n[n.Valid=0]="Valid",n[n.Rejected=1]="Rejected",n[n.Abandoned=2]="Abandoned"}(_||(_={})),function(n){n[n.Pending=0]="Pending",n[n.AwaitingSysDeps=1]="AwaitingSysDeps",n[n.SysValidated=2]="SysValidated",n[n.AwaitingAppDeps=3]="AwaitingAppDeps"}(G||(G={})),function(n){n.CALL_ZOME="Call Zome Function",n.SYS_VALIDATION="System Validation",n.PUBLISH_DHT_OPS="Publish DHT Ops",n.PRODUCE_DHT_OPS="Produce DHT Ops",n.APP_VALIDATION="App Validation",n.AGENT_VALIDATION="Validate Agent",n.INTEGRATE_DHT_OPS="Integrate DHT Ops",n.GENESIS="Genesis",n.INCOMING_DHT_OPS="Incoming DHT Ops",n.VALIDATION_RECEIPT="Validation Receipt"}(x||(x={})),function(n){n.CALL_REMOTE="Call Remote",n.PUBLISH_REQUEST="Publish Request",n.GET_REQUEST="Get Request",n.WARRANT="Warrant",n.GOSSIP="Gossip",n.CONNECT="Connect"}(L||(L={}));export{S as H,L as N,x as W,R as h};
