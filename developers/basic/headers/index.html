<!DOCTYPE html><html lang="en" dir="ltr"><head>
  
    

  



<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic: Headers: Holochain Gym</title>
<meta property="og:title" content="Basic: Headers: Holochain Gym">

<meta name="generator" content="rocket 0.1">
<link rel="canonical" href="/developers/basic/headers/">



<meta name="description" content="Holochain Gym contains exercises, resources and trainings to learn holochain">
<meta property="og:description" content="Holochain Gym contains exercises, resources and trainings to learn holochain">

  
    <link rel="apple-touch-icon" sizes="180x180" href="../../../assets/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../assets/favicon-16x16.png">
<link rel="manifest" href="../../../assets/webmanifest.json">
<link rel="mask-icon" href="../../../assets/safari-pinned-tab.svg" color="#3f93ce">
<meta name="msapplication-TileColor" content="#1d3557">
<meta name="theme-color" content="#1d3557">

  
    <meta property="og:site_name" content="Holochain Gym">
<meta property="og:type" content="website">

<meta property="og:image" content="../../../fd5689ef.png">
<meta property="og:url" content="/developers/basic/headers/">

<meta name="twitter:card" content="summary_large_image">

  
    <link rel="stylesheet" href="../../../5cbbbada.css">
<link rel="stylesheet" href="../../../490f016e.css">
<link rel="stylesheet" href="../../../a0513237.css">
<link rel="stylesheet" href="../../../b8c01bc2.css">

  
    <noscript><link rel="stylesheet" href="/_merged_assets/_static/noscript.css"/></noscript>

  

<link rel="preload" href="../../../53e4563f.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../e47816b7.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../ba1498b4.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../17157e21.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../962426a7.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../3290032f4.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../2b1864b5.js" as="script" crossorigin="anonymous">
</head>

  

  
  <body layout="layout-sidebar">
  

    
      <header id="main-header">
  <div class="content-area">
    
      <button id="mobile-menu-trigger" data-action="trigger-mobile-menu">
	<span class="sr-only">Show Menu</span>
	      <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon">
        <path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path>
      </svg>

</button>

    
      
	<a class="logo-link" href="/">
  <img src="../../../a9d80dbb.svg" alt="A gym tool">
  <span>Holochain Gym</span>
</a>



    
      
  <a href="/architects/" class="
          
          
        "></a>
  <a href="/developers/" class="
          
           active 
        ">Developers</a>

    
      <a href="https://developer.holochain.org/docs/concepts/" class="">Core Concepts</a>
    
      <launch-dark-switch class="light-dark-switch" label="Toggle darkmode">Toggle darkmode</launch-dark-switch>


    
      <a href="https://developer.holochain.org/docs/glossary/" class="">Glossary of Terms</a>
    
      <a href="https://forum.holochain.org/c/learning-library/gym/133" class="">Give us Feedback!</a>
    
      
	<a class="social-link" href="https://github.com/holochain-gym/" aria-label="Holochain Gym on GitHub" rel="noopener noreferrer" target="_blank">
		<span class="sr-only">GitHub</span>
		
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 16" fill="none">
  <title>GitHub</title>
  <path fill="currentColor" fill-rule="evenodd" d="M8.18391.249268C3.82241.249268.253906 3.81777.253906 8.17927c0 3.46933 2.279874 6.44313 5.451874 7.53353.3965.0991.49563-.1983.49563-.3965v-1.3878c-2.18075.4956-2.67638-.9912-2.67638-.9912-.3965-.8922-.89212-1.1895-.89212-1.1895-.69388-.4957.09912-.4957.09912-.4957.793.0992 1.1895.793 1.1895.793.69388 1.2887 1.88338.8922 2.27988.6939.09912-.4956.29737-.8921.49562-1.0904-1.78425-.1982-3.5685-.8921-3.5685-3.96496 0-.89212.29738-1.586.793-2.08162-.09912-.19825-.3965-.99125.09913-2.08163 0 0 .69387-.19825 2.18075.793.59475-.19825 1.28862-.29737 1.9825-.29737.69387 0 1.38775.09912 1.98249.29737 1.4869-.99125 2.1808-.793 2.1808-.793.3965 1.09038.1982 1.88338.0991 2.08163.4956.59475.793 1.28862.793 2.08162 0 3.07286-1.8834 3.66766-3.66764 3.86586.29737.3965.59474.8921.59474 1.586v2.1808c0 .1982.0991.4956.5948.3965 3.172-1.0904 5.4518-4.0642 5.4518-7.53353-.0991-4.3615-3.6676-7.930002-8.02909-7.930002z" clip-rule="evenodd"></path>
</svg>

		
	</a>

    
  </div>
</header>

    

    
  <div id="content-wrapper">
    <div class="content-area">
      
        <rocket-drawer id="sidebar">
  <nav slot="content" id="sidebar-nav">
    
      <a class="logo-link" href="/">
  <img src="../../../a9d80dbb.svg" alt="A gym tool">
  <span>Holochain Gym</span>
</a>


    
      <rocket-navigation>
  <ul><li class="menu-item">
<a href="/developers/requirements/">Requirements</a>
<ul><li class="menu-item">
<a href="/developers/requirements/setup/">Setup</a>

</li>
<li class="menu-item">
<a href="/developers/requirements/documentation/">Documentation</a>

</li>
<li class="menu-item">
<a href="/developers/requirements/rust/">Rust</a>

</li>
<li class="menu-item">
<a href="/developers/requirements/anatomy/">Anatomy</a>

</li></ul>
</li>
<li class="menu-item active">
<a href="/developers/basic/">Basic</a>
<ul><li class="menu-item">
<a href="/developers/basic/entries/">Entries</a>

</li>
<li class="menu-item">
<a href="/developers/basic/hashes/">Hashes</a>

</li>
<li class="menu-item current">
<a href="/developers/basic/headers/">Headers</a>
<ul>
  <li class="menu-item anchor">
    <a href="#recap" class="anchor">Recap</a>
  </li>
  <li class="menu-item anchor">
    <a href="#headers" class="anchor">Headers</a>
  </li>
  <li class="menu-item anchor">
    <a href="#getting-ready" class="anchor">Getting ready</a>
  </li>
  <li class="menu-item anchor">
    <a href="#exercise" class="anchor">Exercise</a>
  </li>
  <li class="menu-item anchor">
    <a href="#experiment" class="anchor">Experiment</a>
  </li>
  <li class="menu-item anchor">
    <a href="#extra" class="anchor">Extra</a>
  </li>
</ul>

</li>
<li class="menu-item">
<a href="/developers/basic/links/">Links</a>

</li>
<li class="menu-item">
<a href="/developers/basic/source-chain/">Source-Chain</a>

</li></ul>
</li>
<li class="menu-item">
<a href="/developers/intermediate/">Intermediate</a>
<ul><li class="menu-item">
<a href="/developers/intermediate/dht/">DHT</a>

</li>
<li class="menu-item">
<a href="/developers/intermediate/paths/">Paths</a>

</li>
<li class="menu-item">
<a href="/developers/intermediate/remote-call/">Remote Call</a>

</li>
<li class="menu-item">
<a href="/developers/intermediate/capability-tokens/">Capability Tokens</a>

</li></ul>
</li></ul>
  <div class="sidebar-bottom">
  <hr>
  <launch-dark-switch class="light-dark-switch" label="Toggle darkmode">Toggle darkmode</launch-dark-switch>


  <a href="https://github.com/holochain-gym/">Help and Feedback</a>
</div>

</rocket-navigation>

    
  </nav>
</rocket-drawer>

      
      
        <main class="markdown-body">
  
    <h1 id="basic-headers"><a class="anchor" href="#basic-headers"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Basic: Headers</h1>
<h2 id="recap"><a class="anchor" href="#recap"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Recap</h2>
<p>By now you know what entries are, how you save them in your holochain app, retrieve them and even write a test for a zome function. And you took a long and hard look at hashes. Perhaps they were not new to you, but they are such a crucial aspect of any holochain app, that it couldn't hurt to refresh those muscles. So on to the next topic: headers.</p>
<h2 id="headers"><a class="anchor" href="#headers"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Headers</h2>
<p>Headers are a delightful topic. Knowing how to work with headers will give you great flexibility! And what is strength without flexibility...<br>
In one of the previous exercises you already saw some header stuff passing by. So let's take a look at them again.</p>
<p>In the simulation below we already added one entry.</p>
<p>First click on the grey circle with the text <code>snacking_log</code>. This should look familiar. It is just an entry. Then click on the top most blue rectangle with the text 'Create' that points directly to the entry. And look at what you see on the righthand side in the Header Contents panel.</p>
<mdjs-story mdjs-story-name="Sim0"></mdjs-story>
<p>When you click on the blue square, you will see a blob of json data, similar to the one you see below. The response you get is something that is called an <strong>element</strong> in Holochain language. We will look at elements in more detail in another exercise, but basically an element is just the combination of an entry and a header.</p>
<p>You will see that there are 2 top level objects: entry and signed_header. The signed_header consists of a header and a signature. You can ignore the latter for now. Before we talk about the header, take one more look at the entry. What do you notice?</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"entry"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"entry_type"</span><span class="token operator">:</span> <span class="token string">"App"</span><span class="token punctuation">,</span>
    <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"Yes I did my workout today"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"signed_header"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"header"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"uhCAk4EP68467-xI_YMR4wO6jYjr3spY5Dvw165WF_aD2Ng8"</span><span class="token punctuation">,</span>
        <span class="token property">"header_seq"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">"prev_header"</span><span class="token operator">:</span> <span class="token string">"uhCkkK6ag489p016T64YVrN2SyjdM6bY41Kt4RNEM3AKY7_w"</span><span class="token punctuation">,</span>
        <span class="token property">"timestamp"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token number">1616571211</span><span class="token punctuation">,</span>
          <span class="token number">293000</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"entry_hash"</span><span class="token operator">:</span> <span class="token string">"uhCEkEPwEe57YM0PFD1Iy3m0eDD1iHPOcesa-ktpjULuImfE"</span><span class="token punctuation">,</span>
        <span class="token property">"entry_type"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"App"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"zome_id"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"visibility"</span><span class="token operator">:</span> <span class="token string">"Public"</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Create"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"hash"</span><span class="token operator">:</span> <span class="token string">"uhCkkf9mOVrLftiyHHnXSpZ49l_JyMhi0Qw-SUosIMMBfmVo"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"signature"</span><span class="token operator">:</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Well the most striking aspect of the entry is its simplicity. This is by design. Remember that the entry is stored and retrieved based on its hash, the content adressable stuff... Well if you and I and 100 others want to store a picture of Wangari Maathai in our Holochain app then there is no need to store it 102 times. One copy would be enough.</p>
<p>So the main idea is: keep entries simple, so they are efficient to store and retrieve. An entry can tell you two things</p>
<ol>
<li>what type of entry it is: Agent, App, CapClaim, CapGrant</li>
<li>what the content of the entry is</li>
</ol>
<p>An entry does not tell you who created the entry, when it was created or any other useful information. This is where the header comes in. You could think of an header as a kind of metadata.</p>
<p>Let's take a look what we can decypher from the example above.</p>
<ul>
<li><strong>author</strong>: the public key of the agent (cell) that signed the entry. This is a crucial component to prove to others you are really the author of this entry. Luckily it is all added automatically.</li>
<li><strong>timestamp</strong>: timestamp of when this entry was committed. It will state the time for when the entry was created. This the time of a specific machine, not some universal, global atomic clock. The time is in UTC, so no timezone information. And the format is a combination of standard Linux Epoch Time e.g.<em>1616571211</em>  combined with elapsed nanoseconds, e.g.<em>293000</em>.  While all this is very helpful to know, it cannot -reliably- be used to order events. Clocks on machine can be skewed, changed manually or do funny stuff on new years eve.</li>
<li><strong>header_seq</strong> &amp; <strong>prev_header</strong> are a better way to determine order. We will talk about them in another exercise.</li>
<li><strong>type</strong> indicates what type of header this is. There are a number of header types:
<ul>
<li>Dna</li>
<li>AgentValidationPkg</li>
<li>InitZomesComplete</li>
<li>CreateLink</li>
<li>DeleteLink</li>
<li>Create</li>
<li>Update</li>
<li>Delete</li>
</ul>
</li>
</ul>
<p>In this exercise you will only have to deal with Create. All headers have the above mentioned fields, with one small exception of the Dna header, which doesn't have a prev_header, for the very simple reason that it is always the first header to be created in a holochain app.</p>
<p>And some headers have some extra fields. Create and Update have 2 more fields. And not surprisingly these fields tell something about entries. Because entries a very lightweight and most of the metadata is in the header, like author, timestamp, etcetera there has to be a link between an entry and its header.</p>
<ul>
<li>
<p><strong>entry_hash</strong> is the hash of the entry. It is exactly the same hash you worked with in the previous exercise. And since you can get the entry based on its hash, it is enough to store the entry hash inside the header. This makes a header a lightweight data structure. Whether your entry contains a 25000 page document or just a single "Hello world" string, the size of the header will be roughly the same size. That is why entries and headers make such a good team: <em><strong>entries are simple, headers are light</strong></em>.</p>
</li>
<li>
<p><strong>entry_type</strong>: contains some additional information on about the entry itself, like the id of the hApp, the id of the zome, it's visibility. We touch on this in a future exercise.</p>
</li>
<li>
<p><strong>hash</strong> And last but not least a header has is own hash. Just like entry, the hash of the header is completely determined by its content. Change one letter in the header and the headerhash will be completely different.</p>
</li>
</ul>
<h2 id="getting-ready"><a class="anchor" href="#getting-ready"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting ready</h2>
<p>So let's get to work with headers and entries. This time you are going to make a simple snacking journal app. Imagine you recently joined a gym and apart from working out you also want to start eating more healthy. You decide to limit your unhealthy snacks. And of course doing that is always easier with an app.</p>
<p>To start you will need to implement these functions: <code>register_snacking</code>, <code>get_by_entry_hash</code> and <code>get_by_header_hash</code>. The first function is for making a note, a <code>snacking_log</code>, at the end of each day you failed to stay snack-free. The latter two are, admittingly rather technical ways, to retrieve a snacking_log.</p>
<p>Let's do a dry run in the simulation gym.</p>
<ul>
<li>Select "register_snacking" in the CallZomeFns below, type <code>april 2: lemon pie</code> in the input and click <em>EXECUTE</em>.</li>
<li>Next: add <code>april 4: chocolate</code> and <code>april 5: marshmellows</code></li>
<li>In the Entry Graph, click on one of the newly added snacking_log entries and copy the value of Entry hash.</li>
<li>Select "get_by_entry_hash" in the CallZomeFns, put in the hash and click <em>EXECUTE</em>. And double check to see if you get the right snacking_log.</li>
<li>Next copy one of the header hashes, select "get_by_header_hash" in the CallZomeFns, put in the hash and click <em>EXECUTE</em>. And double check to see if get the snacking_log you expected.</li>
</ul>
<mdjs-story mdjs-story-name="Sim1"></mdjs-story>
<h2 id="exercise"><a class="anchor" href="#exercise"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exercise</h2>
<p><em>Ok, it is time to start stretching.</em></p>
<p>It is up to you to implement the <code>register_snacking</code>, <code>get_by_entry_hash</code> and <code>get_by_header_hash</code> functions.
The function <code>register_snacking</code> requires some extra attention. You need to return both the header hash and the entry hash. We need this so we have the right hashes to test <code>get_by_entry_hash</code> and <code>get_by_header_hash</code>. We added this struct for you to use to return both hashes to the calling code in the test.</p>
<pre class="language-rust"><code class="language-Rust"><span class="token attribute attr-name">#[derive(Serialize, Deserialize, Clone, Debug)]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> HeaderAndEntryHash<span class="token punctuation">{</span>
    entry_hash<span class="token punctuation">:</span> EntryHashB64<span class="token punctuation">,</span>
    header_hash<span class="token punctuation">:</span> HeaderHashB64
<span class="token punctuation">}</span>
</code></pre>
<p>A few more tips:</p>
<ul>
<li>
<p>Hashes are basic arrays with bytes. An easier way to send hashes back and forth between your UI, or, in our case, tests, and the zome code is to use encode the array as a Base64 string. You can use <code>holo_hash::HeaderHashB64</code> &amp; <code>holo_hash::EntryHashB64</code>.</p>
</li>
<li>
<p>Returning stuff to the UI or tests is always done inside <a href="https://docs.rs/hdk/0.0.100/hdk/map_extern/type.ExternResult.html">ExternResult</a></p>
</li>
<li>
<p><a href="https://docs.rs/hdk/0.0.100/hdk/entry/fn.get.html"><code>get</code></a> returns a <a href="https://docs.rs/hdk/0.0.100/hdk/map_extern/type.ExternResult.html">ExternResult&lt;Option<element>&gt;</element></a>. So if you call <a href="https://docs.rs/hdk/0.0.100/hdk/entry/fn.get.html"><code>get</code></a> at the end of a external function it works smoothly, because at the end of externally accessed function, you need to return a ExternResult. But if you want to use the <code>Element</code> inside your function somehow, you need to unwrap the <code>ExternResult</code>. And in Rust that means you need to handle the error. For instance like this:</p>
</li>
</ul>
<pre><code>  .ok_or(WasmError::Guest(String::from("Could not find SnackingLog for entry hash")))?;
</code></pre>
<p>Why <strong>WasmError::Guest</strong>?</p>
<p>The Rust code in our zome is compiled to a WASM binary. The holochain conductor runs this binary in a sort of virtual machine. The conductor is the host and your zome is the guest. That is why you need to handle possible errors in this way.</p>
<p>Look at the tests or in previous exercises if you need some inspiration. And if you really get lost, you can always take a look at the solution branch in git.</p>
<h2 id="experiment"><a class="anchor" href="#experiment"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Experiment</h2>
<p>After you are done implementing the 3 functions, you can, by way of experiment, change the tests so that you use a header hash in the <code>get_by_entry_hash</code> function instead of a entry hash and see what happens.</p>
<p><em>Spoiler</em><br>
Although the HDK uses the same function to get an element with an entry based on an entry hash or a header hash: <a href="https://docs.rs/hdk/0.0.100/hdk/entry/fn.get.html">get</a> it won't work if you try to change the test. But it is interesting to see how it fails.</p>
<h2 id="extra"><a class="anchor" href="#extra"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extra</h2>
<p>You have to tackle one extra challenge which we didn't cover in the simulation. <code>get_by_entry_hash</code> and <code>get_by_header_hash</code> are good ways to retrieve a snacking log. But what happens if you know the content of the entry but not the header hash?
Implement a function <code>get_header_hash_by_content</code> that returns the header hash based on the content of the entry. The last test in the exercise passes in "april 2: lemon pie" as a String and you need to return the right header hash. You did something very similar in the hashes exercise...</p>
<inline-notification type="tip" title="Exercise">
<ol>
<li>Add the right imports</li>
<li>Check if you are still inside the nix-shell<br>
<em>Your terminal should similar to this</em> <code>[nix-shell:~/path-to-workspace/developer-exercises/path-to-exercise]$</code></li>
<li>Add a struct <code>SnackingLog</code></li>
<li>Implement <code>register_snacking</code>, <code>get_by_entry_hash</code> and <code>get_by_header_hash</code></li>
<li>Implement <code>get_header_hash_by_content</code></li>
<li>Compile your code: <code>./run_build.sh</code></li>
<li>Run the test: <code>./run_tests.sh</code></li>
<li>Don't stop until the tests run green</li>
</ol>
</inline-notification>
<h1 id="errors"><a class="anchor" href="#errors"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Errors</h1>
<p>If you encounter an error check here if you can find something that looks like your error. If not head to the <a href="https://forum.holochain.org/t/gym-help-needed-offer-request/4622/15">forum.holochain.org</a> and ask for help.</p>
<p>For Rust specific questions:
<a href="https://forum.holochain.org/c/technical/rust/15">https://forum.holochain.org/c/technical/rust/15</a>
or
your favorite search engine</p>
        
      

  
    <div class="content-footer">
  <p>
    Caught a mistake or want to contribute to the documentation?
    <a href="https://github.com/holochain-gym/holochain-gym.github.io/edit/master/./docs/developers/basic/headers.md">Edit this page on GitHub!</a>
  </p>
</div>

  
</main>

      
    </div>
  </div>


    
      <footer id="main-footer">
  
    

  
    <div id="footer-menu">
  <div class="content-area">
    
      <nav>
        <h3>Holochain</h3>
        <ul>
          
            <li>
              <a href="https://developer.holochain.org/docs/references/">Documentation</a>
            </li>
          
            <li>
              <a href="https://forum.holochain.org">Forum</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>Gym</h3>
        <ul>
          
            <li>
              <a href="https://forum.holochain.org/c/learning-library/gym/133">Help and Feedback</a>
            </li>
          
            <li>
              <a href="https://github.com/holochain-gym/holochain.github.io/issues">Tasks for Contributors to the Gym</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>Discover</h3>
        <ul>
          
            <li>
              <a href="https://holochain-open-dev.github.io/blog">Holochain Open Dev Blog</a>
            </li>
          
            <li>
              <a href="https://github.com/holochain-open-dev">Open Source Modules</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>License</h3>
        <ul>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">This work is licensed under</a>
            </li>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">a Creative 
Commons Attribution 4.0</a>
            </li>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">International License</a>
            </li>
          
        </ul>
      </nav>
    
  </div>
</div>

  
</footer>

    

    
  



  <script>
  async function serviceWorkerUpdate() {
  if ('serviceWorker' in navigator) {
    const oldReg = await navigator.serviceWorker.getRegistration();
    let oldSwState;
    if (oldReg && oldReg.active) {
      oldSwState = oldReg.active.state;
    }

    let refreshing;

    navigator.serviceWorker.addEventListener('controllerchange', async () => {
      if (refreshing) {
        return;
      }

      const newReg = await navigator.serviceWorker.getRegistration();
      let newSwState;
      if (newReg && newReg.active) {
        newSwState = newReg.active.state;
      }

      if (oldSwState === 'activated' && newSwState === 'activating') {
        refreshing = true;
        window.location.reload();
      }
    });
  }
}

serviceWorkerUpdate();

</script>


  



  

<script inject-service-worker="">
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker
          .register('../../../service-worker.js')
          .then(function() {
            console.log('ServiceWorker registered from "../../../service-worker.js".');
          })
          .catch(function(err) {
            console.log('ServiceWorker registration failed: ', err);
          });
      });
    }
  </script>
<script type="module" src="../../../53e4563f.js"></script>
<script type="module" src="../../../3290032f4.js"></script>

</body></html>